/* 
It places N queens on an NÃ—N chessboard such that no two queens attack each other, 
and prints all possible solutions. 
 
MAX_QUEENS - Maximum number of queens allowed (set to 30) 
queens[]   - Array where index represents the column and value represents the row of a 
queen. 
count      - Counter to track the number of valid solutions found 
*/ 
 
#include <stdio.h> 
#include <conio.h> 
#include <math.h> 
#define MAX_QUEENS 30 
 
int queens[MAX_QUEENS];  
int count = 0;           // Number of valid solutions found 
 
int isSafe(int row, int col) { 
    for (int i = 1; i < col; i++) { 
        // Check row conflict and diagonal conflicts 
        if (queens[i] == row || abs(queens[i] - row) == abs(i - col)) 
            return 0; 
    } 
    return 1; 
} 
 
void printSolution(int n) { 
    count++; 
    printf("\n\nSolution #%d:\n", count); 
    for (int i = 1; i <= n; i++) { 
        for (int j = 1; j <= n; j++) { 
            if (queens[i] == j) 
                printf("Q\t"); 
            else 
                printf("*\t"); 
        } 
        printf("\n"); 
    } 
} 
void solveNQueens(int n) { 
    int col = 1; 
    queens[col] = 0; 
 
    while (col != 0) { 
        queens[col]++;   
        while (queens[col] <= n && !isSafe(queens[col], col)) 
            queens[col]++;   
 
        if (queens[col] <= n) { 
            if (col == n) 
                printSolution(n);   
            else { 
                col++;             
                queens[col] = 0;  
            } 
        } else 
            col--;  
    } 
} 
 
void main() { 
    int n; 
    clrscr(); 
  
   printf("Enter the number of queens (<= %d): ", MAX_QUEENS); 
    scanf("%d", &n); 
 
    if (n < 1 || n > MAX_QUEENS) { 
        printf("Invalid input!\n"); 
        return 1; 
    } 
 
    solveNQueens(n); 
 
    printf("\nTotal Solutions = %d\n", count); 
    getch(); 
} 
